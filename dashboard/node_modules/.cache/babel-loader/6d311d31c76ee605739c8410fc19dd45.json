{"ast":null,"code":"import _classCallCheck from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/shagun/ProgrammingClubApp/dashboard/src/components/Discussion.js\";\nimport React, { Component } from \"react\";\nimport \"./Blog.css\";\nimport Addcomment from \"./Addcomment\";\nimport Comment from \"./Comment\"; //import htmlToDraft from 'html-to-draftjs';\n//import { EditorState, convertToRaw, ContentState } from 'draft-js';\n\nimport firebase from \"firebase\"; //import {WebView} from 'react-native';\n\nvar Discussion =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Discussion, _Component);\n\n  function Discussion(props) {\n    var _this;\n\n    _classCallCheck(this, Discussion);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Discussion).call(this, props));\n    _this.state = {\n      content: \" \",\n      curr_user: 'Parva',\n      upvoted: false,\n      downvoted: false,\n      viewcomments: false,\n      commentlist: false,\n      comment_obj_list: [],\n      curr_id: 0\n    };\n\n    _this.calculate_vote();\n\n    return _this;\n  }\n\n  _createClass(Discussion, [{\n    key: \"calculate_vote\",\n    value: function calculate_vote() {\n      this.state.upvoted = this.props.message.upvote.includes(this.state.curr_user) ? true : false;\n      this.state.downvoted = this.props.message.downvote.includes(this.state.curr_user) ? true : false;\n    }\n  }, {\n    key: \"handleUpvote\",\n    value: function handleUpvote() {\n      if (this.state.downvoted) return;\n      this.props.message.upvote.push(this.state.curr_user);\n      var tempid = this.props.message.id;\n      var upvotearray = this.props.message.upvote;\n      var curr_key;\n      var query = firebase.database().ref(\"blog_entry\").orderByKey();\n      query.once(\"value\").then(function (snapshot) {\n        snapshot.forEach(function (childSnapshot) {\n          var childData = childSnapshot.val();\n\n          if (childData.id == tempid) {\n            curr_key = childSnapshot.key; // console.log(curr_key);\n\n            firebase.database().ref().child(\"blog_entry\").child(curr_key).update({\n              upvote: upvotearray\n            });\n          }\n        });\n      });\n      this.setState({\n        upvoted: true\n      });\n    }\n  }, {\n    key: \"handleDownvote\",\n    value: function handleDownvote() {\n      if (this.state.upvoted) return;\n      this.props.message.downvote.push(this.state.curr_user);\n      var tempid = this.props.message.id;\n      var downvotearray = this.props.message.downvote;\n      var curr_key;\n      var query = firebase.database().ref(\"blog_entry\").orderByKey();\n      query.once(\"value\").then(function (snapshot) {\n        snapshot.forEach(function (childSnapshot) {\n          var childData = childSnapshot.val();\n\n          if (childData.id == tempid) {\n            curr_key = childSnapshot.key; //console.log(curr_key);\n\n            firebase.database().ref().child(\"blog_entry\").child(curr_key).update({\n              downvote: downvotearray\n            });\n          }\n        });\n      });\n      this.setState({\n        downvoted: true\n      });\n    }\n  }, {\n    key: \"handleChange_content\",\n    value: function handleChange_content(event) {\n      this.setState({\n        content: event.target.value\n      });\n    }\n  }, {\n    key: \"handleRemove\",\n    value: function handleRemove(event) {\n      var curr_key;\n      var tempid = this.props.message.id;\n      var query = firebase.database().ref(\"blog_entry\").orderByKey();\n      query.once(\"value\").then(function (snapshot) {\n        snapshot.forEach(function (childSnapshot) {\n          var childData = childSnapshot.val();\n\n          if (childData.id == tempid) {\n            curr_key = childSnapshot.key; //console.log(curr_key);\n\n            firebase.database().ref().child(\"blog_entry\").child(curr_key).remove();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"handleAddcomment\",\n    value: function handleAddcomment(event) {\n      this.setState({\n        viewcomments: true\n      });\n    }\n  }, {\n    key: \"handleKeyPress\",\n    value: function handleKeyPress(event) {\n      if (event.key !== \"Enter\") return;\n      this.handleSend();\n    }\n  }, {\n    key: \"handleChangeView\",\n    value: function handleChangeView() {\n      this.setState({\n        viewcomments: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"blog-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"blog_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.props.message.title), React.createElement(\"span\", {\n        className: \"headerh3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"By UTSAV: \"), React.createElement(\"span\", {\n        className: \"blog_author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, this.props.message.userName), React.createElement(\"span\", {\n        className: \"blog_date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, new Date(this.props.message.timestamp).toLocaleDateString(), \", \", new Date(this.props.message.timestamp).toLocaleTimeString()), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"partition-line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"blog_content\",\n        dangerouslySetInnerHTML: {\n          __html: this.props.message.content\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"partition-line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"tag-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tags-name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Tags:\"), this.props.message.taglist ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, this.props.message.taglist.map(function (item, index) {\n        return React.createElement(\"span\", {\n          className: \"tags\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, item + \"  \");\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"voting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"upvote-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, this.state.upvoted ? React.createElement(\"img\", {\n        className: \"upvote\",\n        src: require('./images/upvote.png'),\n        alt: \"upvote\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      })\n      /*<button disabled className=\"upvoted_blog\">Upvote: {(this.props.message.upvote.length) - 1}       </button> */\n      : React.createElement(\"img\", {\n        className: \"upvote\",\n        src: require('./images/upvote_bw.png'),\n        alt: \"upvote\",\n        onClick: this.handleUpvote.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      })\n      /*<button onClick={this.handleUpvote.bind(this)} >Upvote : {(this.props.message.upvote.length) - 1}       </button>    */\n      , React.createElement(\"div\", {\n        className: \"count\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, this.props.message.upvote.length - 1)), React.createElement(\"div\", {\n        className: \"downvote-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, this.state.downvoted ? React.createElement(\"img\", {\n        className: \"downvote\",\n        src: require('./images/downvote.png'),\n        alt: \"downvote\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })\n      /*<button disabled className=\"downvoted_blog\">Downvote : {(this.props.message.downvote.length) - 1}       </button> */\n      : React.createElement(\"img\", {\n        className: \"downvote\",\n        src: require('./images/downvote_bw.png'),\n        alt: \"downvote\",\n        onClick: this.handleDownvote.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })\n      /* <button onClick={this.handleDownvote.bind(this)}>Downvote : {(this.props.message.downvote.length) - 1}       </button>  */\n      , React.createElement(\"div\", {\n        className: \"count\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, this.props.message.downvote.length - 1))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"partition-line-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"comments-section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"comments-name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Comments\"), React.createElement(\"div\", {\n        className: \"partition-line-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), this.props.message.commentlist ? React.createElement(\"div\", {\n        className: \"comment-main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, this.props.message.commentlist.map(function (element) {\n        return element ? React.createElement(Comment, {\n          message: element,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        });\n      })) : React.createElement(\"div\", {\n        className: \"no-comments\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"(No comments yet)\"), React.createElement(\"div\", {\n        className: \"comment-btn\",\n        onClick: this.handleAddcomment.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"Add a comment\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }), this.state.viewcomments ? React.createElement(\"div\", {\n        className: \"close-comment-btn-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(Addcomment, {\n        message: this.props.message,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"for-space-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"close-comment-btn\",\n        onClick: this.handleChangeView.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"+\")) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"for-space-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"remove-blog-btn\",\n        onClick: this.handleRemove.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"Remove this blog\"), React.createElement(\"div\", {\n        className: \"for-space-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Discussion;\n}(Component);\n\nexport { Discussion as default };","map":{"version":3,"sources":["/home/shagun/ProgrammingClubApp/dashboard/src/components/Discussion.js"],"names":["React","Component","Addcomment","Comment","firebase","Discussion","props","state","content","curr_user","upvoted","downvoted","viewcomments","commentlist","comment_obj_list","curr_id","calculate_vote","message","upvote","includes","downvote","push","tempid","id","upvotearray","curr_key","query","database","ref","orderByKey","once","then","snapshot","forEach","childSnapshot","childData","val","key","child","update","setState","downvotearray","event","target","value","remove","handleSend","title","userName","Date","timestamp","toLocaleDateString","toLocaleTimeString","__html","taglist","map","item","index","require","handleUpvote","bind","length","handleDownvote","element","handleAddcomment","handleChangeView","handleRemove"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Blog.css\";\nimport Addcomment from \"./Addcomment\";\nimport Comment from \"./Comment\";\n\n//import htmlToDraft from 'html-to-draftjs';\n//import { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport firebase from \"firebase\";\n\n//import {WebView} from 'react-native';\n\nexport default class Discussion extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      content: \" \",\n      curr_user: 'Parva',\n      upvoted: false,\n      downvoted: false,\n      viewcomments: false,\n      commentlist: false,\n      comment_obj_list: [],\n      curr_id: 0,\n    };\n\n    this.calculate_vote();\n  }\n\n\n  calculate_vote() {\n    this.state.upvoted = (this.props.message.upvote.includes(this.state.curr_user)) ? true : false;\n    this.state.downvoted = (this.props.message.downvote.includes(this.state.curr_user)) ? true : false;\n\n  }\n\n  handleUpvote() {\n\n    if (this.state.downvoted) return;\n    this.props.message.upvote.push(this.state.curr_user);\n\n    var tempid = this.props.message.id;\n    var upvotearray = this.props.message.upvote;\n    var curr_key;\n\n    var query = firebase.database().ref(\"blog_entry\").orderByKey();\n\n    query.once(\"value\")\n      .then(function (snapshot) {\n        snapshot.forEach(function (childSnapshot) {\n\n          var childData = childSnapshot.val();\n\n          if (childData.id == tempid) {\n            curr_key = childSnapshot.key;\n            // console.log(curr_key);\n            firebase.database().ref().child(\"blog_entry\").child(curr_key).update({ upvote: upvotearray });\n\n          }\n        });\n      });\n\n    this.setState({ upvoted: true });\n  }\n\n  handleDownvote() {\n\n    if (this.state.upvoted) return;\n    this.props.message.downvote.push(this.state.curr_user);\n\n    var tempid = this.props.message.id;\n    var downvotearray = this.props.message.downvote;\n    var curr_key;\n\n    var query = firebase.database().ref(\"blog_entry\").orderByKey();\n\n    query.once(\"value\")\n      .then(function (snapshot) {\n        snapshot.forEach(function (childSnapshot) {\n\n          var childData = childSnapshot.val();\n\n          if (childData.id == tempid) {\n            curr_key = childSnapshot.key;\n            //console.log(curr_key);\n            firebase.database().ref().child(\"blog_entry\").child(curr_key).update({ downvote: downvotearray });\n\n          }\n        });\n      });\n\n    this.setState({ downvoted: true });\n  }\n\n  handleChange_content(event) {\n    this.setState({ content: event.target.value });\n  }\n\n  handleRemove(event) {\n    var curr_key;\n    var tempid = this.props.message.id;\n    var query = firebase.database().ref(\"blog_entry\").orderByKey();\n    query.once(\"value\")\n      .then(function (snapshot) {\n        snapshot.forEach(function (childSnapshot) {\n\n          var childData = childSnapshot.val();\n\n          if (childData.id == tempid) {\n            curr_key = childSnapshot.key;\n            //console.log(curr_key);\n            firebase.database().ref().child(\"blog_entry\").child(curr_key).remove();\n\n          }\n        });\n      });\n  }\n\n  handleAddcomment(event) {\n    this.setState({ viewcomments: true });\n  }\n  handleKeyPress(event) {\n    if (event.key !== \"Enter\") return;\n    this.handleSend();\n  }\n\n  handleChangeView() {\n    this.setState({ viewcomments: false });\n  }\n\n  render() {\n    return (\n\n      <div className=\"blog-box\">\n        <div className=\"message\">\n          <div className=\"blog_title\">{this.props.message.title}</div>\n          <span className=\"headerh3\">By UTSAV: </span>\n          <span className=\"blog_author\">{this.props.message.userName}</span>\n\n          <span className=\"blog_date\">\n            {new Date(this.props.message.timestamp).toLocaleDateString()}\n            {\", \"}\n            {new Date(this.props.message.timestamp).toLocaleTimeString()}\n          </span>\n          <br />\n          <br />\n          <div className=\"partition-line\"></div>\n          <br />\n          <br />\n\n          <div className=\"blog_content\" dangerouslySetInnerHTML={{ __html: this.props.message.content }} />\n\n          <br />\n          <br />\n          <div className=\"partition-line\"></div>\n          <br />\n\n          <div className=\"tag-bar\">\n            <div className=\"tags-name\">Tags:</div>\n            {this.props.message.taglist ? (\n              <div>\n\n                {this.props.message.taglist.map((item, index) => (\n                  < span className=\"tags\">{item + \"  \"}</span>\n                ))\n\n                }\n              </div>\n            ) : (\n                <div></div>\n              )}\n          </div>\n\n          {/* upvote downvote */}\n          <div className=\"voting\">\n            <div className=\"upvote-box\">\n              {this.state.upvoted ? (\n                <img className=\"upvote\" src={require('./images/upvote.png')} alt=\"upvote\" />\n                /*<button disabled className=\"upvoted_blog\">Upvote: {(this.props.message.upvote.length) - 1}       </button> */\n              ) : (\n                  <img className=\"upvote\" src={require('./images/upvote_bw.png')} alt=\"upvote\" onClick={this.handleUpvote.bind(this)} />\n                  /*<button onClick={this.handleUpvote.bind(this)} >Upvote : {(this.props.message.upvote.length) - 1}       </button>    */\n                )}\n\n              <div className=\"count\">{(this.props.message.upvote.length) - 1}</div>\n            </div>\n\n\n            <div className=\"downvote-box\">\n              {this.state.downvoted ? (\n                <img className=\"downvote\" src={require('./images/downvote.png')} alt=\"downvote\" />\n                /*<button disabled className=\"downvoted_blog\">Downvote : {(this.props.message.downvote.length) - 1}       </button> */\n              ) : (\n                  <img className=\"downvote\" src={require('./images/downvote_bw.png')} alt=\"downvote\" onClick={this.handleDownvote.bind(this)} />\n                  /* <button onClick={this.handleDownvote.bind(this)}>Downvote : {(this.props.message.downvote.length) - 1}       </button>  */\n                )}\n              <div className=\"count\">{(this.props.message.downvote.length) - 1}</div>\n            </div>\n          </div>\n\n          <br />\n          <div className=\"partition-line-2\"></div>\n\n\n\n          <div className=\"comments-section\">\n            <div className=\"comments-name\">Comments</div>\n            <div className=\"partition-line-3\"></div>\n            {this.props.message.commentlist ? (\n              <div className=\"comment-main\">\n                {this.props.message.commentlist.map(element =>\n                  (element) ?\n                    (\n                      <Comment message={element} />)\n                    : (<div></div>)\n                )\n                }\n              </div>\n            ) : (\n                <div className=\"no-comments\">(No comments yet)</div>\n              )\n            }\n            <div className=\"comment-btn\" onClick={this.handleAddcomment.bind(this)}>Add a comment</div>\n            <br />\n            <br />\n            <br />\n            <br />\n            <br />\n\n            {this.state.viewcomments ? (\n              <div className=\"close-comment-btn-div\">\n                <Addcomment message={this.props.message} />\n                <div className=\"for-space-2\"></div>\n                <div className=\"close-comment-btn\" onClick={this.handleChangeView.bind(this)}>+</div>\n                {/* <Comment message={this.state.commentlist}/> */}\n              </div>\n            ) : (\n                <div></div>\n              )}\n\n            <div className=\"for-space-2\"></div>\n\n          </div>\n\n          \n          <div className=\"remove-blog-btn\" onClick={this.handleRemove.bind(this)}>Remove this blog</div>\n          <div className=\"for-space-3\"></div>\n          \n\n\n          {/*<div className=\"myclass\"></div>*/}\n\n        </div>\n\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}