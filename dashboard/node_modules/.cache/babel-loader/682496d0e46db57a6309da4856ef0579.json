{"ast":null,"code":"import _classCallCheck from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/shagun/ProgrammingClubApp/dashboard/src/components/AddTutorial.js\";\nimport React, { Component } from \"react\";\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertToRaw } from 'draft-js';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport \"./Blog.css\";\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\nimport firebase from \"firebase\";\n\nvar AddTutorial =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddTutorial, _Component);\n\n  function AddTutorial(props) {\n    var _this;\n\n    _classCallCheck(this, AddTutorial);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddTutorial).call(this, props));\n\n    _this.onEditorStateChange = function (editorState) {\n      _this.setState({\n        editorState: editorState\n      });\n    };\n\n    _this.state = {\n      userName: 'Deep',\n      title: '',\n      content: ' ',\n      editorState: EditorState.createEmpty(),\n      timestamp: firebase.database.ServerValue.TIMESTAMP\n    };\n    _this.tutorialRef = firebase.database().ref().child('tutorial_entry');\n    _this.ref = firebase.database().ref().child('tutorialid');\n    var currid = 0;\n    firebase.database().ref().child('tutorialid').on(\"value\", function (snapshot) {\n      currid = snapshot.val();\n      console.log(currid);\n    }, function (error) {\n      console.log(\"Error: \" + error.code);\n    });\n    return _this;\n  }\n\n  _createClass(AddTutorial, [{\n    key: \"handleChange_title\",\n    value: function handleChange_title(event) {\n      this.setState({\n        title: event.target.value\n      });\n    }\n  }, {\n    key: \"handleChange_content\",\n    value: function handleChange_content(event) {\n      this.setState({\n        content: event.target.value\n      });\n    }\n  }, {\n    key: \"handleSend\",\n    value: function handleSend() {\n      var ref = firebase.database().ref().child('tutorialid');\n      var currid = 0;\n      firebase.database().ref().child('tutorialid').on(\"value\", function (snapshot) {\n        currid = snapshot.val(); // console.log(currid);\n      }, function (error) {\n        console.log(\"Error: \" + error.code);\n      });\n      console.log('currid' + currid);\n\n      if (this.state.title) {\n        var newItem = {\n          id: 1e9 - currid,\n          userName: this.state.userName,\n          title: this.state.title,\n          content: draftToHtml(convertToRaw(this.state.editorState.getCurrentContent()))\n        }; //      console.log('currid2' + currid);\n\n        ref.transaction(function (currid) {\n          return currid + 1;\n        });\n        var item = this.tutorialRef.push();\n        item.setWithPriority(newItem, 0 - Date.now());\n        this.setState({\n          title: ''\n        });\n        this.setState({\n          content: ''\n        });\n        this.setState({\n          currtag: ''\n        });\n        this.setState({\n          taglist: []\n        });\n      }\n    }\n  }, {\n    key: \"handleKeyPress\",\n    value: function handleKeyPress(event) {\n      if (event.key !== 'Enter') return;\n      this.handleSend();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var editorState = this.state.editorState;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Title\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Type title\",\n        onEditorStateChange: true,\n        value: this.state.title,\n        onChange: this.handleChange_title.bind(this),\n        onKeyPress: this.handleKeyPress.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Content\"), React.createElement(Editor, {\n        className: \"rich_text_own\",\n        editorState: editorState,\n        wrapperClassName: \"demo-wrapper\",\n        editorClassName: \"demo-editor\",\n        onEditorStateChange: this.onEditorStateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"form__button\",\n        onClick: this.handleSend.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \" Submit  \"));\n    }\n  }]);\n\n  return AddTutorial;\n}(Component);\n\nexport default AddTutorial;","map":{"version":3,"sources":["/home/shagun/ProgrammingClubApp/dashboard/src/components/AddTutorial.js"],"names":["React","Component","Editor","EditorState","convertToRaw","draftToHtml","htmlToDraft","firebase","AddTutorial","props","onEditorStateChange","editorState","setState","state","userName","title","content","createEmpty","timestamp","database","ServerValue","TIMESTAMP","tutorialRef","ref","child","currid","on","snapshot","val","console","log","error","code","event","target","value","newItem","id","getCurrentContent","transaction","item","push","setWithPriority","Date","now","currtag","taglist","key","handleSend","handleChange_title","bind","handleKeyPress"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SAASC,WAAT,EAAsBC,YAAtB,QAA0C,UAA1C;AACA,OAAO,kDAAP;AACA,OAAO,YAAP;AAEA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AAGA,OAAOC,QAAP,MAAqB,UAArB;;IAGMC,W;;;;;AACJ,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,qFAAMA,KAAN;;AADiB,UAwBnBC,mBAxBmB,GAwBG,UAACC,WAAD,EAAiB;AACrC,YAAKC,QAAL,CAAc;AACZD,QAAAA,WAAW,EAAXA;AADY,OAAd;AAGD,KA5BkB;;AAGjB,UAAKE,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,MADC;AAEXC,MAAAA,KAAK,EAAE,EAFI;AAGXC,MAAAA,OAAO,EAAE,GAHE;AAIXL,MAAAA,WAAW,EAAER,WAAW,CAACc,WAAZ,EAJF;AAKXC,MAAAA,SAAS,EAAEX,QAAQ,CAACY,QAAT,CAAkBC,WAAlB,CAA8BC;AAL9B,KAAb;AAOA,UAAKC,WAAL,GAAmBf,QAAQ,CAACY,QAAT,GAAoBI,GAApB,GAA0BC,KAA1B,CAAgC,gBAAhC,CAAnB;AACA,UAAKD,GAAL,GAAShB,QAAQ,CAACY,QAAT,GAAoBI,GAApB,GAA0BC,KAA1B,CAAgC,YAAhC,CAAT;AAEA,QAAIC,MAAM,GAAC,CAAX;AAEAlB,IAAAA,QAAQ,CAACY,QAAT,GAAoBI,GAApB,GAA0BC,KAA1B,CAAgC,YAAhC,EAA8CE,EAA9C,CAAiD,OAAjD,EAA0D,UAASC,QAAT,EAAmB;AAC3EF,MAAAA,MAAM,GAACE,QAAQ,CAACC,GAAT,EAAP;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,MAAZ;AACF,KAHA,EAGE,UAAUM,KAAV,EAAiB;AACjBF,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAYC,KAAK,CAACC,IAA9B;AACF,KALA;AAfiB;AAuBlB;;;;uCAMkBC,K,EAAO;AACxB,WAAKrB,QAAL,CAAc;AAAEG,QAAAA,KAAK,EAAEkB,KAAK,CAACC,MAAN,CAAaC;AAAtB,OAAd;AACD;;;yCACoBF,K,EAAO;AAC1B,WAAKrB,QAAL,CAAc;AAAEI,QAAAA,OAAO,EAAEiB,KAAK,CAACC,MAAN,CAAaC;AAAxB,OAAd;AACD;;;iCAEW;AAEV,UAAIZ,GAAG,GAAChB,QAAQ,CAACY,QAAT,GAAoBI,GAApB,GAA0BC,KAA1B,CAAgC,YAAhC,CAAR;AACA,UAAIC,MAAM,GAAC,CAAX;AAEAlB,MAAAA,QAAQ,CAACY,QAAT,GAAoBI,GAApB,GAA0BC,KAA1B,CAAgC,YAAhC,EAA8CE,EAA9C,CAAiD,OAAjD,EAA0D,UAASC,QAAT,EAAmB;AAC3EF,QAAAA,MAAM,GAACE,QAAQ,CAACC,GAAT,EAAP,CAD2E,CAE5E;AACD,OAHA,EAGE,UAAUG,KAAV,EAAiB;AACjBF,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAYC,KAAK,CAACC,IAA9B;AACF,OALA;AASAH,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAUL,MAAtB;;AACA,UAAI,KAAKZ,KAAL,CAAWE,KAAf,EAAuB;AACnB,YAAIqB,OAAO,GAAG;AACdC,UAAAA,EAAE,EAAE,MAAIZ,MADM;AAEdX,UAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWC,QAFP;AAGdC,UAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAHJ;AAIdC,UAAAA,OAAO,EAAEX,WAAW,CAACD,YAAY,CAAC,KAAKS,KAAL,CAAWF,WAAX,CAAuB2B,iBAAvB,EAAD,CAAb;AAJN,SAAd,CADmB,CAO3B;;AAEMf,QAAAA,GAAG,CAACgB,WAAJ,CAAgB,UAASd,MAAT,EAAiB;AAC/B,iBAAOA,MAAM,GAAC,CAAd;AACF,SAFA;AAKA,YAAIe,IAAI,GAAC,KAAKlB,WAAL,CAAiBmB,IAAjB,EAAT;AACAD,QAAAA,IAAI,CAACE,eAAL,CAAqBN,OAArB,EAA6B,IAAEO,IAAI,CAACC,GAAL,EAA/B;AAEA,aAAKhC,QAAL,CAAc;AAAEG,UAAAA,KAAK,EAAE;AAAT,SAAd;AACA,aAAKH,QAAL,CAAc;AAAEI,UAAAA,OAAO,EAAE;AAAX,SAAd;AACA,aAAKJ,QAAL,CAAc;AAAEiC,UAAAA,OAAO,EAAE;AAAX,SAAd;AACA,aAAKjC,QAAL,CAAc;AAAEkC,UAAAA,OAAO,EAAE;AAAX,SAAd;AACD;AACF;;;mCAGcb,K,EAAO;AACpB,UAAIA,KAAK,CAACc,GAAN,KAAc,OAAlB,EAA2B;AAC3B,WAAKC,UAAL;AACD;;;6BAGQ;AAAA,UACCrC,WADD,GACiB,KAAKE,KADtB,CACCF,WADD;AAEP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE;AAAO,QAAA,IAAI,EAAC,MAAZ;AACE,QAAA,WAAW,EAAC,YADd;AAC0B,QAAA,mBAAmB,MAD7C;AAEE,QAAA,KAAK,EAAE,KAAKE,KAAL,CAAWE,KAFpB;AAGE,QAAA,QAAQ,EAAE,KAAKkC,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAHZ;AAIE,QAAA,UAAU,EAAE,KAAKC,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAXF,EAaE,oBAAC,MAAD;AACI,QAAA,SAAS,EAAC,eADd;AAEI,QAAA,WAAW,EAAEvC,WAFjB;AAGI,QAAA,gBAAgB,EAAC,cAHrB;AAII,QAAA,eAAe,EAAC,aAJpB;AAKI,QAAA,mBAAmB,EAAE,KAAKD,mBAL9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbF,EAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QApBF,EAsBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAtBF,EAyBE;AACI,QAAA,SAAS,EAAC,cADd;AAEI,QAAA,OAAO,EAAE,KAAKsC,UAAL,CAAgBE,IAAhB,CAAqB,IAArB,CAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAzBF,CADF;AAgCD;;;;EArHuBjD,S;;AAwH1B,eAAeO,WAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertToRaw } from 'draft-js';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport \"./Blog.css\";\n\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\n\n\nimport firebase from \"firebase\";\n\n\nclass AddTutorial extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      userName: 'Deep',\n      title: '',\n      content: ' ',\n      editorState: EditorState.createEmpty(),\n      timestamp: firebase.database.ServerValue.TIMESTAMP,     \n    };\n    this.tutorialRef = firebase.database().ref().child('tutorial_entry');\n    this.ref=firebase.database().ref().child('tutorialid');\n\n    var currid=0;\n\n    firebase.database().ref().child('tutorialid').on(\"value\", function(snapshot) {\n      currid=snapshot.val();\n      console.log(currid);\n   }, function (error) {\n      console.log(\"Error: \" + error.code);\n   }); \n\n    \n  }\n  onEditorStateChange = (editorState) => {\n    this.setState({\n      editorState,\n    });\n  };\n  handleChange_title(event) {\n    this.setState({ title: event.target.value });\n  }\n  handleChange_content(event) {\n    this.setState({ content: event.target.value });\n  }\n\n handleSend() {\n    \n    var ref=firebase.database().ref().child('tutorialid');\n    var currid=0;\n\n    firebase.database().ref().child('tutorialid').on(\"value\", function(snapshot) {\n      currid=snapshot.val();\n     // console.log(currid);\n   }, function (error) {\n      console.log(\"Error: \" + error.code);\n   });\n\n    \n\n    console.log('currid'+ currid);\n    if (this.state.title ) {\n        var newItem = {\n        id: 1e9-currid,\n        userName: this.state.userName,\n        title: this.state.title,\n        content: draftToHtml(convertToRaw(this.state.editorState.getCurrentContent())),\n    };\n//      console.log('currid2' + currid);\n\n      ref.transaction(function(currid) {\n        return currid+1;\n     });\n      \n      \n      var item=this.tutorialRef.push();\n      item.setWithPriority(newItem,0-Date.now());\n\n      this.setState({ title: '' });\n      this.setState({ content: '' });\n      this.setState({ currtag: '' });\n      this.setState({ taglist: [] });\n    }\n  }\n\n\n  handleKeyPress(event) {\n    if (event.key !== 'Enter') return;\n    this.handleSend();\n  }\n\n\n  render() {\n    const { editorState } = this.state;\n    return (\n      <div >\n        <label >Title</label>\n        <br></br>\n        <input type=\"text\"\n          placeholder=\"Type title\"onEditorStateChange\n          value={this.state.title}\n          onChange={this.handleChange_title.bind(this)}\n          onKeyPress={this.handleKeyPress.bind(this)}\n        ></input>\n        <br></br>\n\n        <label>Content</label>\n        \n        <Editor\n            className=\"rich_text_own\"\n            editorState={editorState}\n            wrapperClassName=\"demo-wrapper\"\n            editorClassName=\"demo-editor\"\n            onEditorStateChange={this.onEditorStateChange}\n          />\n        <br></br>\n\n        <br></br>\n\n         \n        <button\n            className=\"form__button\"\n            onClick={this.handleSend.bind(this)}\n        > Submit  </button>\n        </div>\n    );\n  }\n}\n\nexport default AddTutorial;\n\n"]},"metadata":{},"sourceType":"module"}