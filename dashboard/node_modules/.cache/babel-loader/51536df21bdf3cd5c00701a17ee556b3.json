{"ast":null,"code":"import _classCallCheck from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/shagun/ProgrammingClubApp/dashboard/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/shagun/ProgrammingClubApp/dashboard/src/components/Blog.js\";\nimport React, { Component } from \"react\";\nimport \"./Blog.css\";\nimport htmlToDraft from 'html-to-draftjs';\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport firebase from \"firebase\"; //import {WebView} from 'react-native';\n\nvar Blog =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Blog, _Component);\n\n  function Blog(props) {\n    var _this;\n\n    _classCallCheck(this, Blog);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Blog).call(this, props)); //const contentBlock = htmlToDraft(this.props.message.content);\n\n    _this.state = {\n      content: \" \",\n      curr_user: 'Sebastian',\n      upvoted: false,\n      downvoted: false //contentState: ContentState.createFromBlockArray(contentBlock.contentBlocks)\n\n    };\n\n    _this.calculate_vote();\n\n    console.log(_this.props.ref); //set curr_user here by prop\n\n    return _this;\n  }\n\n  _createClass(Blog, [{\n    key: \"calculate_vote\",\n    value: function calculate_vote() {\n      this.state.upvoted = this.props.message.upvote.includes(this.state.curr_user) ? true : false;\n      this.state.downvoted = this.props.message.downvote.includes(this.state.curr_user) ? true : false;\n      this.state.upvoted = this.state.downvoted = this.state.upvoted || this.state.downvoted;\n    }\n  }, {\n    key: \"handleUpvote\",\n    value: function handleUpvote() {\n      if (this.state.downvoted) return;\n      this.props.message.upvote.push(this.state.curr_user);\n      var blogRef = firebase.database().ref().child('blog_entry/' + this.props.title);\n      blogRef.update({\n        'upvote': this.props.message.upvote\n      });\n      this.setState({\n        upvoted: true\n      });\n    }\n  }, {\n    key: \"handleDownvote\",\n    value: function handleDownvote() {\n      if (this.state.upvoted) return;\n      this.props.message.downvote.push(this.state.curr_user);\n      this.setState({\n        downvoted: true\n      });\n    }\n  }, {\n    key: \"handleChange_content\",\n    value: function handleChange_content(event) {\n      this.setState({\n        content: event.target.value\n      });\n    }\n  }, {\n    key: \"handleKeyPress\",\n    value: function handleKeyPress(event) {\n      if (event.key !== \"Enter\") return;\n      this.handleSend();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"blog_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, this.props.message.title), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"headerh3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"By : \"), React.createElement(\"span\", {\n        className: \"blog_author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.props.message.userName), React.createElement(\"span\", {\n        className: \"blog_time\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \" \", new Date(this.props.message.timestamp).toLocaleDateString()), React.createElement(\"span\", {\n        className: \"blog_time\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \" \", new Date(this.props.message.timestamp).toLocaleTimeString()), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.props.message.content\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, this.props.message.taglist.map(function (item, index) {\n        return React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, item + \"  \");\n      })), this.state.upvoted ? React.createElement(\"button\", {\n        disabled: true,\n        className: \"upvoted_blog\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Upvote : \", this.props.message.upvote.length - 1, \"       \") : React.createElement(\"button\", {\n        onClick: this.handleUpvote.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Upvote : \", this.props.message.upvote.length - 1, \"       \"), this.state.downvoted ? React.createElement(\"button\", {\n        disabled: true,\n        className: \"downvoted_blog\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Downvote : \", this.props.message.downvote.length - 1, \"       \") : React.createElement(\"button\", {\n        onClick: this.handleDownvote.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Downvote : \", this.props.message.downvote.length - 1, \"       \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), React.createElement(\"textarea\", {\n        type: \"textarea\",\n        placeholder: \"Type content\",\n        value: this.state.content,\n        onChange: this.handleChange_content.bind(this),\n        onKeyPress: this.handleKeyPress.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Submit\"), React.createElement(\"div\", {\n        className: \"myclass\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Blog;\n}(Component);\n\nexport { Blog as default };","map":{"version":3,"sources":["/home/shagun/ProgrammingClubApp/dashboard/src/components/Blog.js"],"names":["React","Component","htmlToDraft","EditorState","convertToRaw","ContentState","firebase","Blog","props","state","content","curr_user","upvoted","downvoted","calculate_vote","console","log","ref","message","upvote","includes","downvote","push","blogRef","database","child","title","update","setState","event","target","value","key","handleSend","userName","Date","timestamp","toLocaleDateString","toLocaleTimeString","__html","taglist","map","item","index","length","handleUpvote","bind","handleDownvote","handleChange_content","handleKeyPress"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Blog.css\";\nimport htmlToDraft from 'html-to-draftjs';\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport firebase from \"firebase\";\n\n//import {WebView} from 'react-native';\n\nexport default class Blog extends Component {\n  constructor(props) {\n    super(props);\n    //const contentBlock = htmlToDraft(this.props.message.content);\n    this.state = {\n      content: \" \",\n      curr_user: 'Sebastian',\n      upvoted:false,\n      downvoted:false\n      //contentState: ContentState.createFromBlockArray(contentBlock.contentBlocks)\n    };\n\n    this.calculate_vote();\n    console.log(this.props.ref);\n    //set curr_user here by prop\n  }\n  \n  calculate_vote()\n  {\n    this.state.upvoted= (this.props.message.upvote.includes(this.state.curr_user)) ? true : false;\n    this.state.downvoted= (this.props.message.downvote.includes(this.state.curr_user)) ? true : false;\n    this.state.upvoted=this.state.downvoted = (this.state.upvoted || this.state.downvoted);\n  }\n  \n  handleUpvote() {\n    \n    if(this.state.downvoted) return;\n    this.props.message.upvote.push(this.state.curr_user);\n    let blogRef=firebase\n    .database()\n    .ref()\n    .child('blog_entry/' + this.props.title);\n    \n    \n    blogRef.update({'upvote':this.props.message.upvote})\n    this.setState({upvoted:true});\n  }\n\n  handleDownvote() {\n    \n    if(this.state.upvoted) return;\n    this.props.message.downvote.push(this.state.curr_user);\n    this.setState({downvoted:true});\n  }\n\n  handleChange_content(event) {\n    this.setState({ content: event.target.value });\n  }\n  handleKeyPress(event) {\n    if (event.key !== \"Enter\") return;\n    this.handleSend();\n  }\n  render() {\n    return (\n      \n      <div className=\"message\">\n        <span className=\"blog_title\">{this.props.message.title}</span>\n        <br />\n        <span className=\"headerh3\">By : </span>\n        <span className=\"blog_author\">{this.props.message.userName}</span>\n\n        <span className=\"blog_time\">\n          {\" \"}\n          {new Date(this.props.message.timestamp).toLocaleDateString()}\n        </span>\n        <span className=\"blog_time\">\n          {\" \"}\n          {new Date(this.props.message.timestamp).toLocaleTimeString()}\n        </span>\n        <br />\n        <br />\n        <br />\n        \n        <div dangerouslySetInnerHTML={{__html: this.props.message.content}} />\n           \n        {/* // <div contenteditable=\"true\"> {this.props.message.content} </div> */}\n       \n        <div>\n        {this.props.message.taglist.map((item, index) => (\n          < span>{item + \"  \"}</span> \n        ))\n\n        }\n      </div>\n\n        {/* upvote downvote */}\n        \n        {this.state.upvoted ? (\n         <button disabled className=\"upvoted_blog\">Upvote : { (this.props.message.upvote.length)-1 }       </button>\n      ) : (\n        <button onClick={this.handleUpvote.bind(this)} >Upvote : { (this.props.message.upvote.length)-1 }       </button>\n      )}\n        {this.state.downvoted ? (\n         <button disabled className=\"downvoted_blog\">Downvote : { (this.props.message.downvote.length)-1 }       </button>\n      ) : (\n        <button onClick={this.handleDownvote.bind(this)}>Downvote : { (this.props.message.downvote.length)-1 }       </button>\n      )} \n\n        \n        <br></br>\n\n        {/* comment */}\n        <textarea\n          type=\"textarea\"\n          placeholder=\"Type content\"\n          value={this.state.content}\n          onChange={this.handleChange_content.bind(this)}\n          onKeyPress={this.handleKeyPress.bind(this)}\n        />\n        <button>Submit</button>\n        \n        <div className=\"myclass\">{}</div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}